# KAZrag

KAZrag ‚Äî —ç—Ç–æ –ø–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Qdrant –∏ FastAPI. –ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å PDF-—Ñ–∞–π–ª—ã, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ Markdown, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `main.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (FastAPI + –ª–æ–≥–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞)
- `app/` ‚Äî –º–æ–¥—É–ª—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `app_factory.py` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `routes.py` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - `startup.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- `core/` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `embedding/` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —ç–º–±–µ–¥–¥–µ—Ä–∞–º–∏
    - `embeddings.py` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–º–±–µ–¥–¥–µ—Ä–æ–≤
    - `gguf_embeddings.py` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å GGUF –º–æ–¥–µ–ª—è–º–∏
    - `sparse_embedding_adapter.py` ‚Äî –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  - `indexing/` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    - `indexer.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä
    - `indexer_component.py` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
    - `multilevel_indexer.py` ‚Äî –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä
    - `document_loader.py` ‚Äî –∑–∞–≥—Ä—É–∑—á–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    - `metadata_manager.py` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    - `text_splitter.py` ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏
    - `chunker.py` ‚Äî –±–∞–∑–æ–≤—ã–π —á–∞–Ω–∫–µ—Ä
    - `paragraph_chunker.py` ‚Äî —á–∞–Ω–∫–µ—Ä –ø–æ –∞–±–∑–∞—Ü–∞–º
    - `sentence_chunker.py` ‚Äî —á–∞–Ω–∫–µ—Ä –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
    - `multilevel_chunker.py` ‚Äî –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —á–∞–Ω–∫–µ—Ä
    - `indexer_additional.py` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
  - `search/` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º
    - `searcher.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∏—Å–∫
    - `search_strategy.py` ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞
    - `search_executor.py` ‚Äî –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–∏—Å–∫–∞
    - `collection_analyzer.py` ‚Äî –∞–Ω–∞–ª–∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–π
  - `converting/` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
    - `multi_format_converter.py` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤ Markdown
    - `file_converter.py` ‚Äî –±–∞–∑–æ–≤—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–∞–π–ª–æ–≤
    - `file_processor.py` ‚Äî –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —Ñ–∞–π–ª–æ–≤
    - `manager.py` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤
    - `mineru_service.py` ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MinerU
    - `pdf_to_md_chunker.py` ‚Äî —á–∞–Ω–∫–µ—Ä PDF –≤ Markdown
    - `converters/` ‚Äî –º–æ–¥—É–ª–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
      - `base.py` ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤
      - `djvu_converter.py` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä DJVU –≤ PDF
      - `unstructured_converter.py` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä
  - `qdrant/` ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Qdrant
    - `qdrant_client.py` ‚Äî –∫–ª–∏–µ–Ω—Ç Qdrant
    - `qdrant_collections.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ Qdrant
    - `qdrant_collections_additional.py` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
  - `utils/` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
    - `constants.py` ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    - `exception_handlers.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
    - `collection_manager.py` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–π
    - `dependencies.py` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI
- `web/` ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
  - `search_app.py` ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
  - `admin_app.py` ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- `scripts/` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
  - `run_search.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
  - `run_indexing.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
  - `clear_log.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤
- `config/` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `settings.py` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (Pydantic –º–æ–¥–µ–ª—å)
  - `config_manager.py` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - `logging_config.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `templates/` ‚Äî HTML-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  - `index.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞
  - `search_results.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
  - `settings.html` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- `pyproject.toml` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `.gitignore` ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
- `LICENSE` ‚Äî –ª–∏—Ü–µ–Ω–∑–∏—è MIT

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Neuro-Storm/KAZrag.git
cd KAZrag
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python -m venv venv
venv\Scripts\activate  # Windows
# –∏–ª–∏
source venv/bin/activate  # Linux/Mac
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:

```bash
cp .env.example .env
```

–í `.env` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- `ADMIN_API_KEY` –¥–ª—è –∑–∞—â–∏—Ç—ã –∞–¥–º–∏–Ω–∫–∏
- `FASTEMBED_CACHE_DIR` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∫—ç—à–∞ –º–æ–¥–µ–ª–µ–π BM25 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `./models/fastembed_cache`)

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Qdrant

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Qdrant –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é Docker:

```bash
docker run -p 6333:6333 -p 6334:6334 \
    -v $(pwd)/qdrant_storage:/qdrant/storage:z \
    qdrant/qdrant
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–ª–∞—á–Ω—É—é –≤–µ—Ä—Å–∏—é Qdrant, —É–∫–∞–∑–∞–≤ URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MinerU (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF)

```bash
pip install uv
uv pip install -U "mineru[core]"
```

> **–í–∞–∂–Ω–æ:** MinerU —Ç—Ä–µ–±—É–µ—Ç Python < 3.13 –∏ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`magic-pdf`).

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Qdrant –∑–∞–ø—É—â–µ–Ω.
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`venv\Scripts\activate` –∏–ª–∏ `source venv/bin/activate`).
3. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –ø–∞–ø–∫—É `pdfs_to_process/`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã:
   - PDF (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é MinerU)
   - DJVU (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ PDF, –∑–∞—Ç–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è MinerU)
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è JPG, PNG (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é MinerU)
   - –î–æ–∫—É–º–µ–Ω—Ç—ã DOCX, TXT, HTML (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ Markdown)
   - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ PPT, PPTX (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ Markdown)
   - –¢–∞–±–ª–∏—Ü—ã XLSX, XLS (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ Markdown)

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ó–∞–ø—É—Å—Ç–∏—Ç–µ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
python main.py
```

- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8000](http://localhost:8000)
- Swagger UI: [http://localhost:8000/docs](http://localhost:8000/docs)
- –ê–¥–º–∏–Ω–∫–∞: [http://localhost:8000/settings](http://localhost:8000/settings)

–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–ª–æ—Ç–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞:

```bash
python consolemain.py
```

–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ –∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞, —á—Ç–æ –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –∫–ª—é—á, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ —Ñ–∞–π–ª–µ `.env`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∫–∞–∫ unit-—Ç–µ—Å—Ç—ã, —Ç–∞–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pytest:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python -m pytest tests -v

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
python -m pytest tests --cov=core --cov=web --cov=config --cov-report=html

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç–æ–≤
python -m pytest tests/test_config_manager.py tests/test_collection_manager.py tests/test_embedding_manager.py tests/test_indexer_components.py tests/test_search_components.py tests/test_web_routes.py tests/test_paragraph_chunker.py tests/test_sentence_chunker.py -v

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/test_indexing_integration.py tests/test_search_integration.py tests/test_web_api_integration.py -v
```

---

## üîÑ CI/CD –∏ –ª–∏–Ω—Ç–∏–Ω–≥

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Actions –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏.

### –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ruff` –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∫–æ–¥–∞. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `ruff.toml`.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ruff
pip install ruff

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
ruff check .

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
ruff check . --fix
```

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞–∑–±–∏–µ–Ω–∏–µ PDF –Ω–∞ Markdown (MinerU)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
  - –î–æ–∫—É–º–µ–Ω—Ç—ã: DOCX, TXT, HTML
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPG, PNG (—Å –ø–æ–º–æ—â—å—é MinerU)
  - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏: PPT, PPTX
  - –¢–∞–±–ª–∏—Ü—ã: XLSX, XLS
  - DJVU (–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ PDF, –∑–∞—Ç–µ–º –≤ Markdown)
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ Markdown —Ñ–∞–π–ª–æ–≤ –≤ Qdrant —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–µ–π, –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –ø—É—Ç–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GGUF –º–æ–¥–µ–ª–µ–π –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ API –∫–ª—é—á–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —á–∞–Ω–∫–∏–Ω–≥–∞:
  - –ü–æ —Å–∏–º–≤–æ–ª–∞–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è)
  - –ü–æ –∞–±–∑–∞—Ü–∞–º (—Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–±–∑–∞—Ü–µ–≤ –≤ —á–∞–Ω–∫–µ –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º)
  - –ü–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º (—Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞–Ω–∫–µ –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º)
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —á–∞–Ω–∫–∏–Ω–≥ (–æ–¥–∏–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç - –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä–æ–≤):
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –º–∞–∫—Ä–æ-—á–∞–Ω–∫–∏ (—Ä–∞–∑–º–µ—Ä, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ)
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –º–∏–∫—Ä–æ-—á–∞–Ω–∫–∏ (—Ä–∞–∑–º–µ—Ä, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ)
  - –õ—é–±–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö
  - –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–∞–Ω–∫–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Qdrant ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://qdrant.tech/)
- [MinerU ‚Äî GitHub](https://github.com/opendatalab/MinerU)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE).